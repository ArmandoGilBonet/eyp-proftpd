#
# puppet managed file
#

#
# This file is used to manage DSO modules and features.
#

# This is the directory where DSO modules reside

ModulePath <%= @modulepath %>

# Allow only user root to load and unload modules, but allow everyone
# to see which modules have been loaded

ModuleControlsACLs insmod,rmmod allow user root
ModuleControlsACLs lsmod allow user *

<% if(@load_ctrlsadmin) -%>
LoadModule mod_ctrls_admin.c
<% end -%>
<% if(@load_tls) -%>
LoadModule mod_tls.c
<% end -%>

# Install one of proftpd-mod-mysql, proftpd-mod-pgsql or any other
# SQL backend engine to use this module and the required backend.
# This module must be mandatory loaded before anyone of
# the existent SQL backeds.
#LoadModule mod_sql.c

# Install proftpd-mod-ldap to use this
#LoadModule mod_ldap.c

#
# 'SQLBackend mysql' or 'SQLBackend postgres' (or any other valid backend) directives
# are required to have SQL authorization working. You can also comment out the
# unused module here, in alternative.
#

# Install proftpd-mod-mysql and decomment the previous
# mod_sql.c module to use this.
#LoadModule mod_sql_mysql.c

# Install proftpd-mod-pgsql and decomment the previous
# mod_sql.c module to use this.
#LoadModule mod_sql_postgres.c

# Install proftpd-mod-sqlite and decomment the previous
# mod_sql.c module to use this
#LoadModule mod_sql_sqlite.c

# Install proftpd-mod-odbc and decomment the previous
# mod_sql.c module to use this
#LoadModule mod_sql_odbc.c

# Install one of the previous SQL backends and decomment
# the previous mod_sql.c module to use this
#LoadModule mod_sql_passwd.c

LoadModule mod_radius.c
LoadModule mod_quotatab.c
LoadModule mod_quotatab_file.c

# Install proftpd-mod-ldap to use this
#LoadModule mod_quotatab_ldap.c

# Install one of the previous SQL backends and decomment
# the previous mod_sql.c module to use this
#LoadModule mod_quotatab_sql.c
LoadModule mod_quotatab_radius.c
LoadModule mod_wrap.c
LoadModule mod_rewrite.c
LoadModule mod_load.c
LoadModule mod_ban.c
LoadModule mod_wrap2.c
LoadModule mod_wrap2_file.c
# Install one of the previous SQL backends and decomment
# the previous mod_sql.c module to use this
#LoadModule mod_wrap2_sql.c
<% if(@load_dynmasq) -%>
LoadModule mod_dynmasq.c
<% end -%>
LoadModule mod_exec.c
LoadModule mod_shaper.c
LoadModule mod_ratio.c
<% if(@load_site_misc) -%>
LoadModule mod_site_misc.c
<% end -%>

LoadModule mod_sftp.c
LoadModule mod_sftp_pam.c
# Install one of the previous SQL backends and decomment
# the previous mod_sql.c module to use this
#LoadModule mod_sftp_sql.c

LoadModule mod_facl.c
<% if(@load_uniqueid) -%>
LoadModule mod_unique_id.c
<% end -%>
<% if(@load_copy) -%>
LoadModule mod_copy.c
<% end -%>
<% if(@load_deflate) -%>
LoadModule mod_deflate.c
<% end -%>
<% if(@load_ifversion) -%>
LoadModule mod_ifversion.c
<% end -%>
<% if(@load_tlsmemcache) -%>
LoadModule mod_tls_memcache.c
<% end -%>

# Install proftpd-mod-geoip to use the GeoIP feature
#LoadModule mod_geoip.c

# keep this module the last one
LoadModule mod_ifsession.c
